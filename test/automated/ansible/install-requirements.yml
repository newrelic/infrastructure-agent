---

- hosts: testing_hosts_linux
  become: true
  gather_facts: no

  tasks:
    - name: Remove EOL repository sources
      include_role:
        name: remove-eol-sources

    - name: re-install rpm
      include_role:
        name: reinstall-rpm

    - name: install python
      include_role:
        name: install-python

    - name: Install Libcap
      include_role:
        name: install-libcap

    - name: Install GPG
      include_role:
        name: install-gpg

- hosts: testing_hosts_linux
  become: true
  gather_facts: yes

  tasks:
    - name: Configure logrotate
      include_role:
        name: logrotate

    - name: Configure hostname
      include_role:
        name: hostname

- hosts: testing_hosts_macos
  become: false
  gather_facts: yes
  tasks:
    - name: install brew
      include_role:
        name: install-brew
      vars:
        brew_version: 3.6.21 # with 4.0.* there are some problems with sudo https://github.com/Homebrew/brew/issues/14462#issuecomment-1445130069
    - name: install python
      include_role:
        name: install-python

- hosts: testing_hosts_windows
  gather_facts: yes

  tasks:
    - name: Configure hostname
      include_role:
        name: hostname
