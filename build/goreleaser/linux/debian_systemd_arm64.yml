  # Debian systemd arm64
  
  - id: debian-infrastructure-agent-systemd-arm64
    builds:
      - linux-agent-arm64
      - linux-ctl-arm64
      - linux-service-arm64
    package_name: newrelic-infra
    file_name_template: "newrelic-infra_systemd_{{ .Env.TAG }}_{{ .Arch }}"
    vendor: "New Relic, Inc."
    homepage: "https://docs.newrelic.com/docs/release-notes/infrastructure-release-notes/infrastructure-agent-release-notes"
    maintainer: "caos-team@newrelic.com"
    description: "New Relic Infrastructure provides flexible, dynamic server monitoring. With real-time data collection and a UI that scales from a handful of hosts to thousands, Infrastructure is designed for modern Operations teams with fast-changing systems."
    license: "Copyright (c) 2008-2021 New Relic, Inc. All rights reserved."
    formats:
      - deb
    bindir: /usr/bin
    contents:
      - src: 'assets/examples/logging/linux/file.yml.example'
        dst: '/etc/newrelic-infra/logging.d/file.yml.example'
      - src: 'assets/examples/logging/linux/fluentbit.yml.example'
        dst: '/etc/newrelic-infra/logging.d/fluentbit.yml.example'
      - src: 'assets/examples/logging/linux/syslog.yml.example'
        dst: '/etc/newrelic-infra/logging.d/syslog.yml.example'
      - src: 'assets/examples/logging/linux/systemd.yml.example'
        dst: '/etc/newrelic-infra/logging.d/systemd.yml.example'
      - src: 'assets/examples/logging/linux/tcp.yml.example'
        dst: '/etc/newrelic-infra/logging.d/tcp.yml.example'
      - src: 'build/package/systemd/newrelic-infra.service'
        dst: '/etc/systemd/system/newrelic-infra.service'
      - src: 'LICENSE'
        dst: '/var/db/newrelic-infra/LICENSE.txt'
      - src: 'target/nridocker/{{ .Arch }}/etc/newrelic-infra/integrations.d/docker-config.yml'
        dst: '/etc/newrelic-infra/integrations.d/docker-config.yml'
      - src: 'target/nridocker/{{ .Arch }}/var/db/newrelic-infra/newrelic-integrations/bin/nri-docker'
        dst: '/opt/newrelic-infra/newrelic-integrations/bin/nri-docker'
      - src: 'target/nriflex/{{ .Arch }}/nri-flex'
        dst: '/opt/newrelic-infra/newrelic-integrations/bin/nri-flex'
      - src: 'target/nriprometheus/{{ .Arch }}/var/db/newrelic-infra/newrelic-integrations/bin/nri-prometheus'
        dst: '/opt/newrelic-infra/newrelic-integrations/bin/nri-prometheus'
      - src: 'target/fluent-bit-plugin/{{ .Arch }}/out_newrelic.so'
        dst: '/var/db/newrelic-infra/newrelic-integrations/logging/out_newrelic.so'
      - src: 'assets/examples/logging/parsers.conf'
        dst: '/var/db/newrelic-infra/newrelic-integrations/logging/parsers.conf'
    empty_folders:
      - /opt/newrelic-infra/custom-integrations
      - /opt/newrelic-infra/newrelic-integrations
      - /var/db/newrelic-infra/custom-integrations
      - /var/db/newrelic-infra/integrations.d
      - /var/log/newrelic-infra
      - /var/run/newrelic-infra
    # Scripts to execute during the installation of the package.
    scripts:
      preinstall: "build/package/before-install.sh"
      postinstall: "build/package/rpm/postinst-systemd.sh"
      preremove: "build/package/rpm/prerm-systemd.sh"
      postremove: "build/package/after-remove.sh"
    # Packages to replace according to old packaging scripts.
    replaces:
      - opspro-agent
      - opspro-agent-sysv
    # Section.
    section: default
    # Priority.
    priority: extra
    # Recommended packages. If they fail to install installation of the agent will not be interrupted.
    recommends:
      - td-agent-bit #To be removed on removal of the ff fluent_bit_19
      - fluent-bit
  
  # end Debian systemd arm64
